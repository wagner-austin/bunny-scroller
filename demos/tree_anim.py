"""Simple ASCII tree animation test."""
import sys
from blessed import Terminal

FRAMES = [
    # Frame 1
    """\

                     ..   ..
                    ..-. ...
                    .-.-....
                    ..-.--.-.
                    .---.-...    ..  ...
                 ... .-.-...    .--..-.-
            . .  ..--..-...  ...+-+.-..
           .---. ..-.--..   ..-.++----.
            .-..- .------.----+----.--.
             ..-.-.-+...-----.+--+--+-
         .-.-...-.-.--.......-.-----. .
          -.....-..-----.- ..-...  . ..-+
            ---..- .--.-.-..----.-.+++++
              .--...--....-.-+++-+++++-   -++-
            ...- .---..------.-.-+++--.--+++--....-.
      .     .-----+++-..-+++--+++-+- --++++++.......
   ..-... .--.----.--+-.-+#---+++-.-+++++++--..-...--
   . .......-.-++.+++.+.+.#-..-.--.-----..-.+.-.....
    .-.---...-..--.-++--..# ..-....-...-..-...--..
         .... .-+-.--+..--#--   .-  ..---..-.-..
 .....  .....+-+.. ..+----#........---.-...-
 -.-.-...+.-+.-.-..- .--+-#--...---..-.----.. ....
  ----.---+----+--...-.-.+#-----+-...---++--+.---.
     .-+-+++---.-.....--..#+-.-+---....--+--+++-.
     ----     . ... ......++... .-----
            ......-....-  -#.+....---++.
            . .-....-.  . .+.-..-.  ..-+
         ..-.-.  ..--    .+#  .-.
         -.      --.      ++                      .
                          #-            -            .
                          #.
              .           #
                          #         .
                          #
                          #
                          #.
                          #-
                          #+
                          ##
                          -#
                          .#.
                           .
                .     ..  ...     . .   ....     .........
                               ...... ....................
                                   ...      .............""",
    # Frame 2
    """\

                     ..   ..
                    ..-. ...
                    .-.-....
                    ..----.-.
                    .---.-...    ..  ...
                 ... .-.-...    .--..-.-
            . .  ..--..-...  ...--+.-.-
           .---. ..-.--..   ..-.++----.
            .-..- .------..--------.--.
             ..-.-.-+...-----.+--+--+-
         .-.-...-.-.--.......-.---+-. .
          -.....-..------- ..-...  . .--+
            ---..- .--.-.-..----...+++++
              .--...--....-.-+++-+++++-   --+-
            ...- .---..------.-.-+++--.---++--....-.
      .     .-----+++-..-+++--+++-+- --++++++..-....
   ....-. .--.----.--++.-+#---+++-.-+++++++--..-...--
   . .......-.-++.+++.-.+.#-..-.--.-----..-.+.-.....
    .-.---...-..--.-++--..# ..-....-...-..-...--..
         .-.. .-+-.--+..--#--   .-  ..---..-.-..
 -....  -....+-+.. ..+----#........---.-...-
 -.-.-..-+.-+.-.-..- .--+-#.-...---..-.----.. ....
  ----.---+----+--...-.-.+#-----+-...---++--+.-.-.
     .-+++++-----.....--..#+-.-+---....--+--+++--
     ----.    . -.. ......++... .-----
            ......-....-  -#.+....---++.
            ...-....-.  . .+.-..-.  ..-+
         ......  ..--    .+#  .-              .
         -.      --.      ++                      .
                          #-                          .
                          #.
                          #
                          #          -           -
                          #
                          #
                          #.
                          #-
                          #+
                          ##
                          -#
                          .#.
                           .
                .     ..  ...     . .   ....     .........
                               ...... ....................
                                   ...      .............""",
    # Frame 3
    """\

                      ....  .
                      ........
                      ..--....
                     ...--....
                  .  ...--....          .
                 .-......-...   .......--
            ...   ..--......  ...---...-
           .-.--  .----.... .-.--+-.-. .
            .-..-....--......-.+----..-.
              .-..-.-...-.-..--.-+-..-.
           -........-.-..--..-.--.---.
            ...-.. ---++.. ..-..-.    .+..
             .-.....---...---..-....+--+--
               ...-..-....-..---.-+++-+..  .-.-.
             ..-. .--...------.--+-+---....+--+. ...
             ...-.---+..--+-..+.+++...--+-+++-..--.-
   .-..-..-.-.-..--..----.#.----+-.---++++++-----.....
    ........-..-..+++--+.-#...--.+-..-+--....-.-...--.
       .----....-----++.--# ....--.-......-.-..---..
         .-. ..-+-----....#.- . ...  ..-...---..
 ....   . .....-...----.--+-........-.....
 ....-..--.----..... ..-+-+--.....-..-.--.--.
  .---..----------...-.-.+#-..---....----+++.-.+..
    ..---+-+--..-......--.+-..-+---...-.-++-.--.+-
       .       ...........++..-..-.---.       .
            ......-....-  -#-+....-.---+.-
         .--....-...-   . .#.  ..--
        .-.-.. ...-.     .+#              .
                ..   ..   +-
                          #-
                          #.
                          #
                          #
                          #
                          #                       .
                          #.
                          #-               .
                          #+
                          ##
                          -#
                          .#.

                .     ..  ..            ...         ......
                             .... .. .....................
                                     ..     .............""",
    # Frame 4
    """\

                     ....  .
                     ..-.....
                    ..-.-....
                    ...--...-.
                     .---....       .  .
                 .....-.-...    ..--....
             .   ...-.......  ..---.-..
          .....  ...--....  ..-.-----..
           ....-...----...-.---+.--....
             .-..-.---..---.-.----.+-.
          ...-..-..--.-........-..-.. .
          ....- ...-----.....-.-.   .--..
           ..--.....--.-.-.---.-.-.+----.
               ..-...--...-..---.++--+-.   ..
            .-.. ...-..------.---+++--...-+---+.....
     -...   .-...-.--.-..++--.+-++-..--+++++++....-.
    ....-...--....--.-----#.----+-.--+-++++-----..-..
     .-...----.-..+-+---.-#...--.-..-++-..- .---....-
        ..--....--.--+-.--# ..-..-.-......-.-..---..
   .     .-.. .--..---...-#.- .-.. . ..--..---..
  .-....-..-...-.. -.----.#- ......--.....
   ...-------.-..... ..-+-#-......-....-.-.-.  .
    .-+--..-------.-.-.-.+#-...++.......--+-.+.+.-.
     ..-.-+---..-.......-.#-..-+---..-----++-+-++-
     .          . ......-.+#..- .-.---.    .       .
            ......-....-  .#-+... ...--+.
         .-...........  . .#....-.  .. ..
        ...-..  .....    .+#    .
         .        .       ++
                          #-                            ..
                          #.
                          #
                          #
                          #
                          #
                          #.
                          #-                         .
                          #+
                          ##
                          -#
                          .#.
                           .
                   .  ... ...    ..    ....       ........
                             ......   ....................
                                   .  .     .. ...........""",
]

def main():
    term = Terminal()
    frame_idx = 0

    out = sys.stdout.write
    flush = sys.stdout.flush

    with term.fullscreen(), term.cbreak(), term.hidden_cursor():
        out(term.home + term.clear)
        flush()

        while True:
            frame_lines = FRAMES[frame_idx].split('\n')
            start_y = max(0, (term.height - len(frame_lines)) // 2)

            for i, line in enumerate(frame_lines):
                if start_y + i < term.height - 1:
                    out(term.move_xy(0, start_y + i) + line.ljust(62))

            out(term.move_xy(0, term.height - 1) + "Press 'q' to quit")
            flush()

            key = term.inkey(timeout=0.11)
            if key.lower() == 'q':
                break

            frame_idx = (frame_idx + 1) % len(FRAMES)

if __name__ == "__main__":
    main()
