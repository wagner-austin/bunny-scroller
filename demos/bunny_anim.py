"""Simple ASCII bunny animation test."""
import sys
from blessed import Terminal

FRAMES = [
    # Frame 1
    """\
       +-
      #-+-
      #-+--##+.        -----
      #+#+---#.    #+++-----++.
  ..#+-#---#..###+-------------++.
 -+------------------------------#.
 +--+#+--++---------------++------#.++.
-#+---++++++----------+++++--------#.+.
 -++###++##+++----++++++##-------++#-
          .#++++++++#+++#++----++#.
              +##++++##.###++++++#.
                -+-+#+#    .#++++.
               .#+++#++# +#--++#.
               +++++-++  -+++++        """,
    # Frame 2
    """\
     +#
   .#--#   .--.
   .#--#  ++--#
    -+++#+.--#.    ...###---+##.
  --###+-++-  --+##-------------++. ..
 ++-------++++--------------------++.+.
-+-+#++----+--------------+-------+#+-
.+-+---+++++-------+-+++++++-----+#-
 ..##-.##+++++++++++++++###+++-----#
       -#+++++#+####+       -##+++-++
     -+--++###.                .#-+++
   .+-++##+++-.                #-++#.
    -+++  ++                   .++.
                                       """,
    # Frame 3
    """\

   .-.                    ----- .+-
   #-#. -+++-        -#+++-----++-.#
   #-#..#-.++  ..+#---------------#
   .++#-.++  -++------------------#
   .++++###++-----------+++------+#
 +-------+------------++++++------+#.
.+-+#+----+--------++++++##++++----++.
-#----++++++++++++++++##.. .-#++++---#.
 +#####    #+++++###+           -##+-+-
          #---####-                #++#
       .#+++#-#++-.                ###.
       ++++  -++-
                                       """,
    # Frame 4
    """\
     +#
    -+-+.   .--        .---
     ++++  ++--#   .#+++---+++#
      #++#+---# .+-------------++.
       ##+-++.--+----------------+-.-
   #+++---++++----------++---------#.+.
  #--##----+---------+++++--------++#+.
 ++-----++++------++++++#+++----+++#-
 .##+++##+++++-++++++###-#+++++++#.
          #++++####        ###++#-
          -+-+#.#++-      -+++-++.
         +-++#. -++#     ++-+##.
        -+++   .+++       ++-
                                       """,
]

def main():
    term = Terminal()
    frame_idx = 0

    out = sys.stdout.write
    flush = sys.stdout.flush

    with term.fullscreen(), term.cbreak(), term.hidden_cursor():
        # Clear once at start
        out(term.home + term.clear)
        flush()

        while True:
            # Draw current frame (overwrite previous)
            frame_lines = FRAMES[frame_idx].split('\n')
            start_y = (term.height - len(frame_lines)) // 2

            for i, line in enumerate(frame_lines):
                # Pad line to consistent width to overwrite old content
                out(term.move_xy(5, start_y + i) + line.ljust(45))

            out(term.move_xy(0, term.height - 1) + "Press 'q' to quit")
            flush()

            # Check for input
            key = term.inkey(timeout=0.11)
            if key.lower() == 'q':
                break

            frame_idx = (frame_idx + 1) % len(FRAMES)

if __name__ == "__main__":
    main()
